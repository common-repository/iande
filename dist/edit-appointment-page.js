"use strict";(self.webpackChunkiande_plugin=self.webpackChunkiande_plugin||[]).push([[365],{883:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(7757),i=n.n(r),o=n(7033),a=n(1870);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)}))}}const l={name:"EditAppointmentPage",components:{AdditionalData:function(){return n.e(296).then(n.bind(n,1929))},GroupsAdditionalInfo:function(){return n.e(267).then(n.bind(n,3065))},GroupsDate:function(){return n.e(689).then(n.bind(n,2768))},SelectExhibition:function(){return n.e(736).then(n.bind(n,1922))},SelectInstitution:function(){return n.e(938).then(n.bind(n,8462))}},data:function(){return{formError:"",screen:1}},computed:{appointment:(0,o.Z_)("appointments/current"),fields:(0,o.U2)("appointments/filteredFields")},beforeMount:function(){var e=this;return f(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.qs.has("screen")&&(e.screen=Number(a.qs.get("screen"))),!a.qs.has("ID")){t.next=12;break}return t.prev=2,t.next=5,a.hi.get("appointment/get",{ID:Number(a.qs.get("ID"))});case 5:n=t.sent,e.appointment=c(c({},e.appointment),n),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),e.formError=t.t0;case 12:case"end":return t.stop()}}),t,null,[[2,9]])})))()},methods:{isFormValid:function(){var e=this.$refs.form;return e.$v.$touch(),!e.$v.$invalid},resetAppointment:(0,o.RE)("appointments/reset"),updateAppointment:function(){var e=this;return f(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.formError="",!e.isFormValid()){t.next=14;break}return t.prev=2,t.next=5,a.hi.post("appointment/update",e.fields);case 5:return t.sent,t.next=8,e.resetAppointment();case 8:window.location.assign(e.$iandeUrl("appointment/list")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.formError=t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,11]])})))()}}};const d=(0,n(1900).Z)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("article",{staticClass:"mt-lg"},[n("div",{staticClass:"iande-container narrow iande-stack stack-lg"},[n("form",{staticClass:"iande-form iande-stack stack-lg",on:{submit:function(t){return t.preventDefault(),e.updateAppointment.apply(null,arguments)}}},[1===e.screen?n("SelectExhibition",{ref:"form"}):2===e.screen?n("GroupsDate",{ref:"form"}):3===e.screen?n("GroupsAdditionalInfo",{ref:"form"}):4===e.screen?n("SelectInstitution",{ref:"form",attrs:{canAddInstitution:!1}}):6===e.screen?n("AdditionalData",{ref:"form"}):e._e(),e._v(" "),e.formError?n("div",{staticClass:"iande-form-error"},[n("span",[e._v(e._s(e.__(e.formError,"iande")))])]):e._e(),e._v(" "),n("button",{staticClass:"iande-button primary",attrs:{type:"submit"}},[e._v("\n                "+e._s(e.__("Salvar","iande"))+"\n            ")])],1)])])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=edit-appointment-page.js.map