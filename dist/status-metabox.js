"use strict";(self.webpackChunkiande_plugin=self.webpackChunkiande_plugin||[]).push([[985],{9549:(t,n,e)=>{e.r(n),e.d(n,{default:()=>u});var r=e(7757),o=e.n(r),a=e(1870);function s(t,n,e,r,o,a,s){try{var i=t[a](s),c=i.value}catch(t){return void e(t)}i.done?n(c):Promise.resolve(c).then(r,o)}function i(t){return function(){var n=this,e=arguments;return new Promise((function(r,o){var a=t.apply(n,e);function i(t){s(a,r,o,i,c,"next",t)}function c(t){s(a,r,o,i,c,"throw",t)}i(void 0)}))}}const c={name:"StatusMetabox.vue",props:{id:{type:[Number,String],required:!0},postStatus:{type:String,required:!0}},data:function(){return{cancellationReason:"",formError:""}},mounted:function(){this.disableNativePublishButton()},methods:{cancelPost:function(){var t=this;return i(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.formError="",n.prev=1,n.next=4,a.hi.post("appointment/cancel",{ID:t.id,reason:t.cancellationReason});case 4:window.location.reload(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),t.formError=n.t0;case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},disableNativePublishButton:function(){var t=document.querySelector("input[name=publish]");t&&(t.disabled=!0,t.classList.add("button-disabled"),t.classList.remove("button-primary"))},publish:function(){var t=this;return i(o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.formError="",n.prev=1,n.next=4,a.hi.post("appointment/set_status",{ID:t.id,post_status:"publish"});case 4:window.location.reload(),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),t.formError=n.t0;case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}};const u=(0,e(1900).Z)(c,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"iande-status-metabox"},["publish"!==t.postStatus?e("button",{staticClass:"button button-primary button-large",attrs:{type:"button"},on:{click:t.publish}},[t._v("\n        "+t._s(t.__("Confirmar agendamento","iande"))+"\n    ")]):t._e(),t._v(" "),e("div",[e("label",{attrs:{for:"cancellation-reason"}},[t._v(t._s(t.__("Motivo do cancelamento","iande")))]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.cancellationReason,expression:"cancellationReason"}],attrs:{id:"cancellation-reason"},domProps:{value:t.cancellationReason},on:{input:function(n){n.target.composing||(t.cancellationReason=n.target.value)}}})]),t._v(" "),e("button",{staticClass:"button button-primary button-large button-cancel",attrs:{type:"button"},on:{click:t.cancelPost}},[t._v("\n        "+t._s(t.__("Cancelar agendamento","iande"))+"\n    ")]),t._v(" "),t.formError?e("p",{staticClass:"form-error"},[t._v("\n        "+t._s(t.__(t.formError,"iande"))+"\n    ")]):t._e()])}),[],!1,null,null,null).exports},1900:(t,n,e)=>{function r(t,n,e,r,o,a,s,i){var c,u="function"==typeof t?t.options:t;if(n&&(u.render=n,u.staticRenderFns=e,u._compiled=!0),r&&(u.functional=!0),a&&(u._scopeId="data-v-"+a),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=c):o&&(c=i?function(){o.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,n){return c.call(n),l(t,n)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:u}}e.d(n,{Z:()=>r})}}]);
//# sourceMappingURL=status-metabox.js.map