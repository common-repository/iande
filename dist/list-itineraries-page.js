"use strict";(self.webpackChunkiande_plugin=self.webpackChunkiande_plugin||[]).push([[770],{6332:(e,t,r)=>{r.d(t,{Z:()=>n});const i={name:"AppointmentsFilter",model:{prop:"value",event:"updateValue"},props:{id:{type:String,required:!0},label:{type:String,required:!0},options:{type:Array,required:!0},value:{type:null,required:!0}},computed:{modelValue:{get:function(){return this.value},set:function(e){this.$emit("updateValue",e)}}},methods:{idFor:function(e){return"filter-".concat(this.id,"-").concat(e)}}};const n=(0,r(1900).Z)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("fieldset",{staticClass:"iande-appointments-filter iande-form",attrs:{"aria-labelledby":e.idFor("label")}},[r("div",{staticClass:"iande-appointments-filter__row"},[r("div",{staticClass:"iande-appointments-filter__label",attrs:{id:e.idFor("label")}},[e._v(e._s(e.label)+":")]),e._v(" "),e._l(e.options,(function(t){return[r("input",{directives:[{name:"model",rawName:"v-model",value:e.modelValue,expression:"modelValue"}],key:"input-"+t.value,attrs:{id:e.idFor(t.value),type:"radio",name:e.id},domProps:{value:t.value,checked:e._q(e.modelValue,t.value)},on:{change:function(r){e.modelValue=t.value}}}),e._v(" "),r("label",{key:"label-"+t.value,attrs:{for:e.idFor(t.value)}},[t.icon?r("span",{staticClass:"iande-label",attrs:{"aria-label":t.label}},[r("Icon",{attrs:{icon:t.icon}})],1):r("span",{staticClass:"iande-label"},[e._v(e._s(t.label))])])]}))],2)])}),[],!1,null,null,null).exports},4049:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var i=r(7757),n=r.n(i),a=r(6332),s=r(7033),l=r(1870);function o(e,t,r,i,n,a,s){try{var l=e[a](s),o=l.value}catch(e){return void r(e)}l.done?t(o):Promise.resolve(o).then(i,n)}const c={name:"ItineraryPreview",props:{itinerary:{type:Object,required:!0}},computed:{cover:function(){return this.itinerary.cover||"".concat(this.$iande.iandePath,"assets/img/cover-placeholder.png")},editable:function(){return this.user.ID==this.itinerary.user_id},numItems:function(){return this.itinerary.items?this.itinerary.items.length:0},user:(0,s.U2)("users/current")},methods:{like:function(){var e,t=this;return(e=n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.hi.post("itinerary/like/?ID=".concat(t.itinerary.ID));case 2:e.sent?(t.itinerary.liked=!0,t.itinerary.likes++):(t.itinerary.liked=!1,t.itinerary.likes--);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function s(e){o(a,i,n,s,l,"next",e)}function l(e){o(a,i,n,s,l,"throw",e)}s(void 0)}))})()}}};var u=r(1900);const d=(0,u.Z)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("article",{staticClass:"iande-itinerary-preview"},[r("div",{staticClass:"iande-itinerary-preview__cover"},[r("img",{attrs:{src:e.cover,alt:""}}),e._v(" "),e.editable?r("a",{attrs:{href:e.$iandeUrl("itinerary/edit/?ID="+e.itinerary.ID),"aria-label":e.__("Editar","iande")}},[r("Icon",{attrs:{icon:"pen"}})],1):e._e()]),e._v(" "),r("div",{staticClass:"iande-itinerary-preview__content"},[r("h3",[r("a",{attrs:{href:e.$iandeUrl("itinerary/view/?ID="+e.itinerary.ID)}},[e._v(e._s(e.itinerary.title))])]),e._v(" "),r("div",{staticClass:"iande-itinerary-preview__bar"},[r("span",[e._v(e._s(e.sprintf(e._n("%s item","%s itens",e.numItems,"iande"),e.numItems)))]),e._v(" "),r("span",[r("span",{attrs:{"aria-label":e.__("Visualizações","iande"),title:e.__("Visualizações","iande")}},[r("Icon",{attrs:{icon:"eye"}})],1),e._v(" "),r("span",[e._v(e._s(e.itinerary.views||0))])]),e._v(" "),r("span",{on:{click:e.like}},[e.itinerary.liked?r("span",{attrs:{"aria-label":e.__("Gostou","iande"),title:e.__("Gostou","iande")}},[r("Icon",{staticClass:"gold",attrs:{icon:"star"}})],1):r("span",{attrs:{"aria-label":e.__("Gostar","iande"),title:e.__("Gostar","iande")}},[r("Icon",{attrs:{icon:["far","star"]}})],1),e._v(" "),r("span",[e._v(e._s(e.itinerary.likes||0))])])]),e._v(" "),r("p",[e._v(e._s(e.itinerary.description))])])])}),[],!1,null,null,null).exports;var p=r(424);function v(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var i,n,a=[],s=!0,l=!1;try{for(r=r.call(e);!(s=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);s=!0);}catch(e){l=!0,n=e}finally{try{s||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function h(e,t,r,i,n,a,s){try{var l=e[a](s),o=l.value}catch(e){return void r(e)}l.done?t(o):Promise.resolve(o).then(i,n)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function s(e){h(a,i,n,s,l,"next",e)}function l(e){h(a,i,n,s,l,"throw",e)}s(void 0)}))}}const b={name:"ListItinerariesPage",components:{AppointmentsFilter:a.Z,ItineraryPreview:d},data:function(){return{filter:"publish",maxPages:1,page:1,publicItineraries:[],userItineraries:[]}},computed:{filteredItineraries:function(){return"draft"===this.filter?this.userItineraries.filter((function(e){return"draft"===e.post_status})):this.userItineraries.filter((function(e){return"pending"===e.post_status||"publish"===e.post_status}))},statusOptions:(0,l.a9)([{label:(0,p.__)("Publicados","iande"),value:"publish"},{label:(0,p.__)("Rascunhos","iande"),value:"draft"}]),totalAppointments:function(){return this.filteredItineraries.length+this.publicItineraries.length}},created:function(){var e=this;return y(n().mark((function t(){var r,i,a,s;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.all([l.hi.get("itinerary/list_published/?page=1"),l.hi.get("itinerary/list")]);case 3:r=t.sent,i=_(r,2),a=i[0],s=i[1],e.maxPages=a.num_pages,e.publicItineraries=a.items,e.userItineraries=s,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},methods:{fetchMoreItineraries:function(){var e=this;return y(n().mark((function t(){var r,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.page+1,t.next=4,l.hi.get("itinerary/list_published/?page=".concat(r));case 4:i=t.sent,e.page=r,e.publicItineraries=[].concat(v(e.publicItineraries),v(i.items)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}};const I=(0,u.Z)(b,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("article",{staticClass:"mt-lg",attrs:{id:"iande-list-itineraries"}},[r("div",{staticClass:"iande-container iande-stack stack-lg"},[r("h1",[e._v(e._s(e.__("Roteiros virtuais","iande")))]),e._v(" "),r("div",{staticClass:"iande-appointments-toolbar"},[r("AppointmentsFilter",{attrs:{id:"status",label:e.__("Visualizando","iande"),options:e.statusOptions},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),e._v(" "),r("a",{staticClass:"iande-button small outline",attrs:{href:e.$iandeUrl("itinerary/create")}},[r("Icon",{attrs:{icon:"circle-plus"}}),e._v("\n                "+e._s(e.__("Criar novo roteiro","iande"))+"\n            ")],1)],1),e._v(" "),e.filteredItineraries.length>0?r("section",{staticClass:"iande-container iande-stack stack-md"},[r("h2",[e._v(e._s(e.__("Seus roteiros","iande")))]),e._v(" "),r("div",{staticClass:"iande-itineraries-preview"},e._l(e.filteredItineraries,(function(e){return r("ItineraryPreview",{key:e.ID,attrs:{itinerary:e}})})),1)]):e._e(),e._v(" "),e.publicItineraries.length>0?r("section",{staticClass:"iande-container iande-stack stack-md"},[r("h2",[e._v(e._s(e.__("Roteiros públicos","iande")))]),e._v(" "),r("div",{staticClass:"iande-itineraries-preview"},e._l(e.publicItineraries,(function(e){return r("ItineraryPreview",{key:e.ID,attrs:{itinerary:e}})})),1),e._v(" "),e.page<e.maxPages?r("div",{staticClass:"iande-container narrow"},[r("button",{staticClass:"iande-button primary",on:{click:e.fetchMoreItineraries}},[e._v("\n                    "+e._s(e.__("Carregar mais","iande"))+"\n                ")])]):e._e()]):e._e(),e._v(" "),e.totalAppointments>0?r("div",{staticClass:"iande-container narrow"},[r("a",{staticClass:"iande-button outline",attrs:{href:e.$iandeUrl("itinerary/create")}},[r("Icon",{attrs:{icon:"circle-plus"}}),e._v("\n                "+e._s(e.__("Criar novo roteiro","iande"))+"\n            ")],1)]):e._e()])])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=list-itineraries-page.js.map