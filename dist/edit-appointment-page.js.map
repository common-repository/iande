{"version":3,"file":"dist/edit-appointment-page.js","mappings":"wIAAA,I,0hCCiCA,MCjCiO,EDiCjO,CACE,KAAFA,sBACE,WAAFC,CACI,eATJ,WAAE,OAAF,+BAUI,qBATJ,WAAE,OAAF,+BAUI,WATJ,WAAE,OAAF,+BAUI,iBARJ,WAAE,OAAF,+BASI,kBAVJ,WAAE,OAAF,gCAYE,KATF,WAUI,MAAJ,CACM,UAANC,GACM,OAANC,IAGE,SAAFC,CACI,aAAJC,EAAAA,EAAAA,IAAAA,wBACI,QAAJC,EAAAA,EAAAA,IAAAA,gCAEE,YAnBF,WAmBI,IAAJ,OAAI,OAAJ,yBAAM,IAAN,EAAM,OAAN,sBAAQ,OAAR,gCACA,qBACgB,EAAhB,oCAEAC,EAAAA,GAAAA,IAAAA,MAJA,0CAMAC,EAAAA,GAAAA,IAAAA,kBAAAA,CACgB,GAAhBC,OAAAA,EAAAA,GAAAA,IAAAA,SAPA,OAMc,EANd,OASc,EAAd,qCATA,gDAWc,EAAd,eAXA,4DAeE,QAAFC,CACI,YADJ,WAEM,IAAN,kBAEM,OADA,EAANC,GAAAA,UACA,eAEI,kBAAJC,EAAAA,EAAAA,IAAAA,sBACI,kBAPJ,WAOM,IAAN,OAAM,OAAN,yBAAQ,OAAR,sBAAU,OAAE,OAAZ,yBACgB,EAAhB,cACA,gBAFA,0CAIAJ,EAAAA,GAAAA,KAAAA,qBAAAA,EAAAA,QAJA,8BAKA,qBALA,OAMgB,OAAhBK,SAAAA,OAAAA,EAAAA,UAAAA,qBANA,kDAQgB,EAAhB,eARA,+DExDA,SAXgB,E,QAAA,GACd,GHRW,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACE,YAAY,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,+CAA+C,CAACF,EAAG,OAAO,CAACE,YAAY,kCAAkCC,GAAG,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBT,EAAIU,kBAAkBC,MAAM,KAAMC,cAAc,CAAiB,IAAfZ,EAAIX,OAAce,EAAG,mBAAmB,CAACS,IAAI,SAAyB,IAAfb,EAAIX,OAAce,EAAG,aAAa,CAACS,IAAI,SAAyB,IAAfb,EAAIX,OAAce,EAAG,uBAAuB,CAACS,IAAI,SAAyB,IAAfb,EAAIX,OAAce,EAAG,oBAAoB,CAACS,IAAI,OAAOC,MAAM,CAAC,mBAAoB,KAAyB,IAAfd,EAAIX,OAAce,EAAG,iBAAiB,CAACS,IAAI,SAASb,EAAIe,KAAKf,EAAIgB,GAAG,KAAMhB,EAAa,UAAEI,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,OAAO,CAACJ,EAAIgB,GAAGhB,EAAIiB,GAAGjB,EAAIkB,GAAGlB,EAAIZ,UAAW,eAAeY,EAAIe,KAAKf,EAAIgB,GAAG,KAAKZ,EAAG,SAAS,CAACE,YAAY,uBAAuBQ,MAAM,CAAC,KAAO,WAAW,CAACd,EAAIgB,GAAG,qBAAqBhB,EAAIiB,GAAGjB,EAAIkB,GAAG,SAAU,UAAU,qBAAqB,SAC78B,IGUpB,EACA,KACA,KACA,MAI8B","sources":["webpack://iande-plugin/./src/assets/js/pages/edit-appointment.vue?e848","webpack://iande-plugin/src/assets/js/pages/edit-appointment.vue","webpack://iande-plugin/./src/assets/js/pages/edit-appointment.vue?daa3","webpack://iande-plugin/./src/assets/js/pages/edit-appointment.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('article',{staticClass:\"mt-lg\"},[_c('div',{staticClass:\"iande-container narrow iande-stack stack-lg\"},[_c('form',{staticClass:\"iande-form iande-stack stack-lg\",on:{\"submit\":function($event){$event.preventDefault();return _vm.updateAppointment.apply(null, arguments)}}},[(_vm.screen === 1)?_c('SelectExhibition',{ref:\"form\"}):(_vm.screen === 2)?_c('GroupsDate',{ref:\"form\"}):(_vm.screen === 3)?_c('GroupsAdditionalInfo',{ref:\"form\"}):(_vm.screen === 4)?_c('SelectInstitution',{ref:\"form\",attrs:{\"canAddInstitution\":false}}):(_vm.screen === 6)?_c('AdditionalData',{ref:\"form\"}):_vm._e(),_vm._v(\" \"),(_vm.formError)?_c('div',{staticClass:\"iande-form-error\"},[_c('span',[_vm._v(_vm._s(_vm.__(_vm.formError, 'iande')))])]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"iande-button primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"\\n                \"+_vm._s(_vm.__('Salvar', 'iande'))+\"\\n            \")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <article class=\"mt-lg\">\n        <div class=\"iande-container narrow iande-stack stack-lg\">\n            <form class=\"iande-form iande-stack stack-lg\" @submit.prevent=\"updateAppointment\">\n                <SelectExhibition ref=\"form\" v-if=\"screen === 1\"/>\n                <GroupsDate ref=\"form\" v-else-if=\"screen === 2\"/>\n                <GroupsAdditionalInfo ref=\"form\" v-else-if=\"screen === 3\"/>\n                <SelectInstitution ref=\"form\" v-else-if=\"screen === 4\" :canAddInstitution=\"false\"/>\n                <AdditionalData ref=\"form\" v-else-if=\"screen === 6\"/>\n\n                <div class=\"iande-form-error\" v-if=\"formError\">\n                    <span>{{ __(formError, 'iande') }}</span>\n                </div>\n\n                <button class=\"iande-button primary\" type=\"submit\">\n                    {{ __('Salvar', 'iande') }}\n                </button>\n            </form>\n        </div>\n    </article>\n</template>\n\n<script>\n    import { call, get, sync } from 'vuex-pathify'\n\n    import { api, qs } from '@utils'\n\n    const AdditionalData = () => import(/* webpackChunkName: 'additional-data-step' */ '@components/AdditionalData.vue')\n    const GroupsAdditionalInfo = () => import(/* webpackChunkName: 'groups-additional-info-step' */ '@components/GroupsAdditionalInfo.vue')\n    const GroupsDate = () => import(/* webpackChunkName: 'groups-date-step' */ '@components/GroupsDate.vue')\n    const SelectInstitution = () => import(/* webpackChunkName: 'select-institution-step' */ '@components/SelectInstitution.vue')\n    const SelectExhibition = () => import(/* webpackChunkName: 'select-exhibition-step' */ '@components/SelectExhibition.vue')\n\n    export default {\n        name: 'EditAppointmentPage',\n        components: {\n            AdditionalData,\n            GroupsAdditionalInfo,\n            GroupsDate,\n            SelectExhibition,\n            SelectInstitution,\n        },\n        data () {\n            return {\n                formError: '',\n                screen: 1,\n            }\n        },\n        computed: {\n            appointment: sync('appointments/current'),\n            fields: get('appointments/filteredFields'),\n        },\n        async beforeMount () {\n            if (qs.has('screen')) {\n                this.screen = Number(qs.get('screen'))\n            }\n            if (qs.has('ID')) {\n                try {\n                    const appointment = await api.get('appointment/get', {\n                        ID: Number(qs.get('ID'))\n                    })\n                    this.appointment = { ...this.appointment, ...appointment }\n                } catch (err) {\n                    this.formError = err\n                }\n            }\n        },\n        methods: {\n            isFormValid () {\n                const formComponent = this.$refs.form\n                formComponent.$v.$touch()\n                return !formComponent.$v.$invalid\n            },\n            resetAppointment: call('appointments/reset'),\n            async updateAppointment () {\n                this.formError = ''\n                if (this.isFormValid()) {\n                    try {\n                        const result = await api.post('appointment/update', this.fields)\n                        await this.resetAppointment()\n                        window.location.assign(this.$iandeUrl('appointment/list'))\n                    } catch (err) {\n                        this.formError = err\n                    }\n                }\n            },\n        }\n    }\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-appointment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-5[0].rules[0].use[0]!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit-appointment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit-appointment.vue?vue&type=template&id=4ecd2090&\"\nimport script from \"./edit-appointment.vue?vue&type=script&lang=js&\"\nexport * from \"./edit-appointment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["name","components","formError","screen","computed","appointment","fields","qs","api","ID","methods","formComponent","resetAppointment","window","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","updateAppointment","apply","arguments","ref","attrs","_e","_v","_s","__"],"sourceRoot":""}